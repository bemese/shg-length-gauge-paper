\subsection{Expressions for 
\texorpdfstring{$(\calbv^{\ell,\lda,a}_{nm})_{;k^b}$}{Vnonlocal}
and \texorpdfstring{$(r^a_{nm})_{;k^b}$}{Vnonlocal}
for non-local potentials}\label{appvnl}
Using Eqs.~\eqref{rnminn}, \eqref{conmri3n}, \eqref{gendevnn} and
defining 
$
\calt^{\rma\rmb}\equiv[r^{\rmb},\calv^{\lda,\rma}]
\equiv
[r^{\rmb},\calv^\rma]
$
one can show that
\begin{align}\label{nmesn}
(\calv^{\lda,\rma,\ell}_{nm})_{;k^{\rmb}}&=
\calt_{nm}^{\ell,\rma\rmb}
+i
\sum_{q}
\bigg(
r^{\rmb}_{nq}  
\calv^{\lda,\rma,\ell}_{q m}
-
\calv^{\lda,\rma,\ell}_{nq}   
r^{\rmb}_{q m}
\bigg)  
+i  
r^{\rmb}_{nm}
\Delta^{\rma,\ell}_{mn}
,
\end{align}  
where
\begin{eqnarray}\label{tdel}
\Delta^{\rma,\ell}_{mn}
=
\calv^{\lda,\rma,\ell}_{nn}  
-
\calv^{\lda,\rma,\ell}_{mm}  
,
\end{eqnarray} 
and
\begin{align}\label{tau.1}
\calt_{nm}^{\ell,\rma\rmb}
=
\frac{\hbar}{m_e}\gd_{\rma\rmb}
C^\ell_{nm} 
-i 
\sum_q 
[r^{\rmb},v^{\nl,\rma}]_{nq}C^\ell_{qm} 
.
\end{align}  
The matrix elements $[r^{\rmb},v^{\nl,\rma}]_{nm}$
are calculated in Appendix \ref{calt}.
% is small
%compared to the other terms, thus we neglect it throwout this work.\cite{valerie} 

To obtain $(r^{\rma}_{nm})_{;k^{\rmb}}$ we use Eq.~\eqref{chon.10} to
write
$(r^{\rma}_{nm})_{;k^{\rmb}}
=(v^{\lda,\rma}_{nm}/i\go^\lda_{nm})_{;k^{\rmb}}
$, and apply the chain rule. 
Then, 
$(v^{\lda,\rma}_{nm})_{;k^{\rmb}}$ is obtained
from Eq.~\eqref{nmesn} by
taking
$C^\ell(z)=1$ or $C^\ell_{nm}=\gd_{nm}$. Thus,
\begin{align}\label{na_rgendevn}
(r^{\rma}_{nm})_{;k^{\rmb}}
&=
\tau^{\rma\rmb}_{nm}
+
\frac{ 
r^{\rmb}_{nm}
\Delta^{\rma}_{mn}
+r^{\rma}_{nm}
\Delta^{\rmb}_{mn}
}
{\go^\lda_{nm}}
+
\frac{i}{\go^\lda_{nm}}
\sum_{\ell}
\bigg(
\go^\lda_{\ell m} 
r^{\rmb}_{n\ell} 
r^{\rma}_{\ell m}
-
\go^\lda_{n\ell} 
r^{\rma}_{n\ell} 
r^{\rmb}_{\ell m}
\bigg)
,
\end{align} 
where 
\begin{eqnarray}\label{del}
\Delta^{\rma}_{mn}
=
v^{\lda,\rma}_{nn}  
-
v^{\lda,\rma}_{mm}  
,
\end{eqnarray}
and
\begin{align}\label{tau.1} 
t_{nm}^{\rma\rmb}
=\frac{\hbar}{m_e}\gd_{ab}\gd_{nm}+ 
-i [r^{\rmb},v^{\nl,\rma}]_{nm} 
.
\end{align}   
generalizes the usual expresion of
$(r^a_{nm})_{;k^b}$ for local 
Hamiltonians,\cite{aversaPRB95,nastosPRB05,cabellosPRB09,rashkeevPRB98}
to
the case of a
nonlocal Hamiltonian.
Note that the layered term
$\calt^{\ell,\rma\rmb}_{nm}$ reduces to $\tau^{\rma\rmb}_{nm}$, for the
full-slab or bulk case. 


